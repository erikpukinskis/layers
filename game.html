<html>

<head>
<title>Learning WebGL &mdash; lesson 4</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<script src="philogl.js"></script>
<script src="underscore.js"></script>
<script src="palette.js"></script>
<script src="box.js"></script>
<script src="glower.js"></script>
<script src="world.js"></script>
<script src="glStart.js"></script>
<script>

var rand = function(max) {
  return parseInt(Math.random()*max);
}

var world = new World();

var randomBox = function() {
  var box = new Box();
  box.setColorSeed([rand(20),11]);
  box.position.set(rand(6)-3, rand(6)-3, -8);
  return box;
}

var addABox = function() {
  box = randomBox();
//  box.position.y = 0;
  if (!world.at(box.position)) {
    world.objects.push(box);  
  }
  return box;
}

//_.times(20, addABox);
/* inline 
world.objects[0].position.x = -2
world.objects[1].position.x = -1
world.objects[2].position.x = 0
world.objects[3].position.x = 1*/

addABox();

world.selected = world.objects[0];
var glower = new Glower(world.selected);

</script>

<script id="shader-fs" type="x-shader/x-fragment">
  #ifdef GL_ES
  precision highp float;
  #endif

  varying vec4 vColor;

  void main(void) {
    gl_FragColor = vColor;
  }
</script>

<script id="shader-vs" type="x-shader/x-vertex">
  attribute vec3 aVertexPosition;
  attribute vec4 aVertexColor;

  uniform mat4 uMVMatrix;
  uniform mat4 uPMatrix;

  varying vec4 vColor;

  void main(void) {
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
    vColor = aVertexColor;
  }

</script>

<link rel="stylesheet" href="style.css" />

</head>

<body onload="webGLStart();" id="body">
  <div id="message"></div>
  <canvas id="lesson04-canvas" style="border: none;" width="500" height="500"></canvas>
  <ul id="help">
    <li id="color"><span>c</span> Change color</li>
    <li id="move"><span>m</span> Move</li>
    <li id="select"><span>l</span> Select</li>
  </ul>
</body>

<script src="ui.js"></script>
</html>

